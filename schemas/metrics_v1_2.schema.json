{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Resonance Metrics v1.2 (Simplified)",
  "description": "Schema for the JSON output of the resonance_metric.py script, focusing on core resonance.",
  "type": "object",
  "required": [
    "overall_resonance_score",
    "files",
    "threshold_used",
    "threshold_source"
  ],
  "properties": {
    "overall_resonance_score": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "The average resonance score across all processed files in a directory, or the score for a single file."
    },
    "files": {
      "type": "array",
      "description": "Details for each processed file.",
      "items": {
        "type": "object",
        "required": [
          "file",
          "resonance_score"
        ],
        "properties": {
          "file": {
            "type": "string",
            "description": "The name of the processed file."
          },
          "resonance_score": {
            "type": "number",
            "minimum": 0.0,
            "maximum": 1.0,
            "description": "The resonance score for this specific file."
          },
          "error": {
            "type": "string",
            "description": "Error message if processing of the file failed."
          }
        }
      }
    },
    "threshold_used": {
      "type": "number",
      "description": "The resonance threshold used for evaluation."
    },
    "threshold_source": {
      "type": "string",
      "enum": ["CLI", "config_file", "calibration", "default"],
      "description": "The source from which the threshold was obtained."
    }
  },
  "additionalProperties": false
}


